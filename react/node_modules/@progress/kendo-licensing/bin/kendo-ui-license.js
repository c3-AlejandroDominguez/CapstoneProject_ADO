#!/usr/bin/env node
"use strict";var e=require("child_process"),t=require("readline"),n=require("crypto"),o=require("util"),r=require("fs"),i=require("jsonwebtoken"),s=require("os"),c=require("path"),a=require("glob"),d=require("https"),u=require("http");const l=["TELERIK_LICENSE","KENDO_UI_LICENSE"],p="TELERIK_LICENSE_PATH",f=["telerik-license.txt","kendo-ui-license.txt"],g=".telerik",I="Telerik",h="TELERIK_LICENSING_APIENDPOINTADDRESS",m="https://licensing.telerik.com/api/v1/usage",v=["KENDOUIANGULAR","KENDOUICOMPLETE","KENDOUIREACT","KENDOUIVUE"],y=["TF_BUILD","GITHUB_ACTIONS","GITLAB_CI","bamboo.buildKey","BUILDKITE","CIRCLECI","CIRRUS_CI","CODEBUILD_BUILD_ID","HEROKU_TEST_RUN_ID","TEAMCITY_VERSION","TRAVIS","BUILDER_OUTPUT","GERRIT_PROJECT","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI","BITRISE_IO","BUDDY_WORKSPACE_ID","APPVEYOR","CIRCLECI","SEMAPHORE","DRONE","DSARI","TDDIUM","SCREWDRIVER","STRIDER","TASKCLUSTER_ROOT_URL","JENKINS_URL","GO_PIPELINE_NAME","HUDSON_URL","WERCKER","NETLIFY","NOW_GITHUB_DEPLOYMENT","GITLAB_DEPLOYMENT","BITBUCKET_DEPLOYMENT","BITBUCKET_BUILD_NUMBER","NOW_BUILDER","VERCEL_GITLAB_DEPLOYMENT","VERCEL_BITBUCKET_DEPLOYMENT","VERCEL_URL","MAGNUM","NEVERCODE","RENDER","SAIL_CI","SHIPPABLE","TEAMCITY_VERSION","BUILD_ID","CI_NAME","CI"],E=e=>Boolean(e)&&!["0","false","no"].includes(e.trim().toLowerCase()),N=(e,t,n)=>`${((e,t)=>`[${e}][Telerik and Kendo UI Licensing]`+(t?` ${t}:`:""))(e,n)} ${t}\n`,L=(e,t)=>console.warn(N("WARN",e,t)),w=(e,t)=>console.error(N("ERROR",e,t)),T=e=>console.log(N("INFO",e)),C=(e,t)=>{E(process.env.TELERIK_LICENSING_DEBUG)&&console.log(N("DEBUG",e,t))};function U(e){return Math.floor(e.getTime()/1e3)}function S(){return U(new Date)}function O(e){const t=S()-U(e);return Math.floor(t/86400)}function D(e){const t=function(e){if("function"==typeof atob)return atob(e);if("function"==typeof Buffer)return Buffer.from(e,"base64").toString("utf8");throw new Error("atob is undefined")}(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function k(e){const t=e.split(".")[1],n=String.fromCharCode(...(o=t,D(o.replace(/-/g,"+").replace(/_/g,"/"))));var o;return JSON.parse(n)}function P(e){return new Date(1e3*e)}function R(e,t){const n=P(t);return e>new Date(n.getFullYear(),n.getMonth(),n.getDate()+1).getTime()/1e3}function _(e,t){const n=t.filter(e=>"usage"!==e.type).filter(t=>{var n,o;return e.productCode===t.code||(null===(n=e.redistributedBy)||void 0===n?void 0:n.includes(t.code))||(null===(o=e.productCodes)||void 0===o?void 0:o.includes(t.code))}).sort((e,t)=>t.expiration-e.expiration);return n.find(e=>"subscription"===e.type&&!R(S(),e.expiration))||n.find(t=>"perpetual"===t.type&&!R(e.publishDate,t.expiration))||n.find(e=>"subscription"===e.type&&!R(function(e,t){const n=new Date(1e3*e);return n.setDate(n.getDate()+t),U(n)}(S(),10),e.expiration))||n.find(e=>"trial"===e.type&&!R(S(),e.expiration))||n.find(e=>"subscription"===e.type)||n.find(e=>"perpetual"===e.type)||n.find(e=>"trial"===e.type)}const $=e=>e.productCode||e.productCodes[0],A=o.promisify(e.exec),B=r.promises.readFile;function j(e){const t=Buffer.alloc(16);for(let n=0;n<16;n++)t[n]=e[n]^e[n+16];function n(e,n){let o="";for(let r=e;r<=n;r++)o+=t[r].toString(16).padStart(2,"0");return o}return`${n(0,3)}-${n(4,5)}-${n(6,7)}-${n(8,9)}-${n(10,15)}`}async function K(){try{switch(process.platform){case"win32":return await async function(){const o=e.spawn("powershell.exe",["-nologo","-Command","$BIOS = @(Get-WmiObject Win32_BIOS | Select-Object -Property Manufacturer, SerialNumber, Name);$Product = @(Get-WmiObject Win32_ComputerSystemProduct | Select-Object -Property UUID);New-Object -TypeName PSObject -Property @{    'BIOS' = $BIOS;    'Product' = $Product;} | ConvertTo-JSON"]);let r="";const i=t.createInterface(o.stdout);for await(const e of i)r=""==r?e:r+"\n"+e;const s=JSON.parse(r);let c="Telerik Licensing\nWorkstation Id Fingerprint\n";function a(e){null!=e&&""!=e&&(c+=e+";")}c+="BIOS:\n";for(const e of s.BIOS)c+="  - ",a(e.Manufacturer),a(e.SerialNumber),a(e.Name),c+="\n";c+="Product:\n";for(const e of s.Product)c+="  - ",a(e.UUID),c+="\n";const d=n.createHash("sha256");d.update(c);const u=j(d.digest());return{fingerprint:c,id:u}}();case"darwin":return await async function(){var e,t,o,r;const i=null===(t=null===(e=await A("ioreg -rd1 -w0 -c IOPlatformExpertDevice"))||void 0===e?void 0:e.stdout)||void 0===t?void 0:t.toString(),{platformUUID:s}=i.match(/"IOPlatformUUID"\s=\s"(?<platformUUID>[0-9A-F-]*)"/).groups,{platformSN:c}=i.match(/"IOPlatformSerialNumber"\s=\s"(?<platformSN>[^"]*)"/).groups,a=null===(r=null===(o=await A("sysctl hw.model"))||void 0===o?void 0:o.stdout)||void 0===r?void 0:r.toString(),{hardwareModel:d}=a.match(/^hw.model:\s(?<hardwareModel>.*)$/m).groups,u=`Telerik Licensing\nWorkstation Id Fingerprint\nPlatform UUID: ${s}\nPlatform S/N: ${c}\nHardware model: ${d}\n`,l=n.createHash("sha256");return l.update(u),{fingerprint:u,id:j(l.digest())}}();case"linux":return await async function(){var e,t,o,r,i,s,c,a,d,u;let l="";try{l=(null===(t=null===(e=await B("/etc/machine-id"))||void 0===e?void 0:e.toString())||void 0===t?void 0:t.trim())||""}catch{}try{l=l||(null===(r=null===(o=await B("/var/lib/dbus/machine-id"))||void 0===o?void 0:o.toString())||void 0===r?void 0:r.trim())||""}catch{}let p="";try{p=(null===(s=null===(i=await B("/sys/devices/virtual/dmi/id/bios_vendor"))||void 0===i?void 0:i.toString())||void 0===s?void 0:s.trim())||""}catch{}let f="";try{f=(null===(a=null===(c=await B("/sys/devices/virtual/dmi/id/board_vendor"))||void 0===c?void 0:c.toString())||void 0===a?void 0:a.trim())||""}catch{}let g="";try{g=(null===(u=null===(d=await B("/sys/devices/virtual/dmi/id/chassis_vendor"))||void 0===d?void 0:d.toString())||void 0===u?void 0:u.trim())||""}catch{}const I=`Telerik Licensing\nWorkstation Id Fingerprint\nMachine Id: ${l}\nBIOS Vendor: ${p}\nBoard Vendor: ${f}\nChassis Vendor: ${g}\n`,h=n.createHash("sha256");return h.update(I),{fingerprint:I,id:j(h.digest())}}();default:throw new Error(`Platform ${process.platform} not supported.`)}}catch(e){return{fingerprint:"<error>",id:"00000000-0000-0000-0000-000000000000"}}}let b;function x(){return b||(b=K())}function M(e){const t=process.env[e];return t&&"false"!==t.toLowerCase()}function V(){if(M("TF_BUILD"))return"Azure Pipelines";if(M("GITHUB_ACTIONS"))return"GitHub Actions";for(const e of y)if(M(e))return"Other"}function W(e,t){return new Promise((n,o)=>{i.verify(e,t,{algorithms:["RS256"]},function(e,t){e&&o(e),n(t)})})}function F(){const e=process.env.INIT_CWD||process.cwd();return c.resolve(e)}function G(){const e=F().split(c.sep),t=[],n=process.env[p];if(n&&n.length>0)return[n];for(let n=0;n<e.length;n++){const o=e.slice(0,e.length-n).join(c.sep);t.push(o||c.sep)}const o=process.env.APPDATA;return"win32"===s.platform()&&o?t.push(c.join(o,I)):t.push(c.join(s.homedir(),g)),t.flatMap(e=>f.map(t=>c.join(e,t)))}function Y(e){try{const t=r.readFileSync(e,{encoding:"utf-8"});return JSON.parse(t)}catch(e){return{}}}const J=/@(progress|telerik)\/[^/@"]+/,q=e=>{var t;return null===(t=e.match(J))||void 0===t?void 0:t[0]},H=e=>J.test(e);function Q(e){const t=function(e){const t=Y(c.join(e,"package-lock.json")).packages||{},n=new Map;for(const e of Object.keys(t)){const o=t[e],r=q(e);r&&Boolean(o.version)&&n.set(r,o.version)}return n}(e),n=function(e){let t="";try{t=r.readFileSync(c.join(e,"yarn.lock"),{encoding:"utf-8"})}catch(e){}const n=new Map,o=t.split("\n");return o.forEach((e,t)=>{var r;const i=e.startsWith('"@progress/')||e.startsWith('"@telerik/'),s=q(e);if(i&&s&&t<o.length-1){const e=null===(r=o[t+1].match(/version[\s:]+"?([.\d]+)"?/))||void 0===r?void 0:r[1];e&&n.set(s,e)}}),n}(e),o=function(...e){const t=new Map;for(const n of e)for(const[e,o]of n.entries())t.set(e,o);return t}(t,n),i=Y(c.join(e,"package.json")),s={...i.dependencies,...i.devDependencies};for(const e of Object.keys(s)){const t=s[e];H(e)&&Boolean(t)&&o.set(e,t)}return o}const X=[{match:e=>"@progress/kendo-ui"===e,code:"KENDOUICOMPLETE",name:"Kendo UI"},{match:e=>e.startsWith("@progress/kendo-angular-"),code:"KENDOUIANGULAR",name:"Kendo UI for Angular"},{match:e=>e.startsWith("@progress/kendo-react-"),code:"KENDOUIREACT",name:"KendoReact"},{match:e=>e.startsWith("@progress/kendo-vue-"),code:"KENDOUIVUE",name:"Kendo UI for Vue"}],z=e=>e.replace(/^[~^v><= ]+/g,"");function Z(e){let t;const n=F();try{t=require.resolve(e+"/package.json",{paths:[n]})}catch(o){const[r,i]=e.split("/");t=c.join(n,"node_modules",r,i,"package.json")}return t}function ee(e){var t;return Boolean(e&&(e.productCode||(null===(t=e.productCodes)||void 0===t?void 0:t.length)>0))}function te(e){const t=new Map;for(const n of e){const e=$(n);let o;t.has(e)?o=t.get(e):(o=new Map,t.set(e,o)),o.has(n.version)||o.set(n.version,{...n,name:"<group>"})}return[...t.values()].flatMap(e=>[...e.values()])}function ne(){const e=function(){for(const e of G())try{return r.accessSync(e,r.constants.R_OK),e}catch(e){}return null}();if(null!==e){return{success:!0,source:e,value:r.readFileSync(e,{encoding:"utf-8"}).trim()}}return{success:!1,message:G().map(e=>`* ${e}`).join("\n")}}function oe(){const e=function(){for(const e of l){const t=process.env[e];if(t&&t.length>0)return{success:!0,source:e,value:t.trim()}}return{success:!1,message:`* Environment Variables: ${l.join(", ")}\n`}}();if(!0===e.success)return e;const t=ne();return!0===t.success?t:{success:!1,message:"No Telerik and Kendo UI License file found.\n\nThe following locations were searched:\n"+e.message+t.message+"\n\nTo download a license key file, visit https://prgress.co/3PBSVoC"}}function re(e,t){const n=`${e}: `,o=P(t.expiration),r=-O(o);"subscription"===t.type?T(n+`Your ${e} subscription is active. `+`Expiration in ${r} days - ${o.toLocaleDateString()}.`):"trial"===t.type?T(n+`Your ${e} trial expires in ${r} days.`):"perpetual"===t.type&&T(n+"Valid license found.")}class ie{constructor(e,t){this.productName=e,this.severity="WARN",this.code="TKL101",this.licenseEvidence=null,this.message=`${e} is not listed in your current license file.\n  Learn more about ${e} licensing at ${t}`}}class se{constructor(e,t,n,o,r){this.productName=e,this.licenseEvidence=t,this.severity="WARN",this.code="TKL102",this.message=`Your current license has expired on ${n.toLocaleDateString()} and is not valid for ${e} version ${o}. The product was published on ${r.toLocaleDateString()}.\n  Renew your license at https://prgress.co/3PwQNi1`}}class ce{constructor(e,t,n){this.productName=e,this.licenseEvidence=t,this.severity="WARN",this.code="TKL103",this.message=`Your subscription has expired ${n} days ago.\n  Renew your maintenance and support to enjoy uninterrupted service at https://prgress.co/3PwQMut`}}class ae{constructor(e,t,n){this.productName=e,this.licenseEvidence=t,this.severity="WARN",this.code="TKL104",this.message=`Your subscription has expired ${n} days ago.\n  Renew your maintenance and support to enjoy uninterrupted service at https://prgress.co/3PwQMut`}}class de{constructor(e,t,n){this.productName=e,this.licenseEvidence=t,this.severity="WARN",this.code="TKL105",this.message=`Your trial has expired ${n} days ago.\n  Thank you for trying out ${e}, we hope you enjoyed your trial period.\n  To continue using our product, consider upgrading to a commercial license: https://prgress.co/3PwQMdX`}}function ue(e,t){const n=e.licenses||[],o=(e=>[...(e.licenses||[]).map(e=>k(e)),...(e.products||[]).map(t=>({type:t.trial?"trial":"perpetual",code:t.code,expiration:t.licenseExpirationDate,licenseId:e.licenseId,userId:e.userId}))])(e),r=o.findIndex(e=>"usage"===e.type),i=-1!==r?n[r]:null,s=te(t),c=new Map,a=new Map,d=new Map;for(const e of s){const t=e.productCode||e.productCodes[0],n=_(e,o);if(n)if("subscription"===n.type&&R(S(),n.expiration)){const o=O(P(n.expiration));o>10?a.set(t,new ce(e.productName,n,o)):a.set(t,new ae(e.productName,n,o))}else if("perpetual"===n.type&&R(e.publishDate,n.expiration))a.set(t,new se(e.productName,n,P(n.expiration),e.version,P(e.publishDate)));else if("trial"===n.type&&R(S(),n.expiration)){const o=O(P(n.expiration));a.set(t,new de(e.productName,n,o))}else c.has(n.code)||(C(`${n.code} v${e.version}, ${n.type}, ${P(n.expiration).toISOString()}`),c.set(n.code,n),d.set(n.code,e.productName));else a.set(t,new ie(e.productName,e.licensingDocsUrl))}return{productErrors:a,productLicenses:c,productVersions:s,productNames:d,usageEvidence:i}}function le(e,t){const n=F(),o=[c.join(c.join(__dirname,"../dist"),"index*.{js,mjs}"),c.join(n,".angular/cache/**/vite/deps*/chunk-*.js"),c.join(n,".angular/cache/**/vite/deps*/@progress*.js"),c.join(n,".next/static/chunks/*.js"),c.join(n,"node_modules/.vite/deps/chunk-*.js"),c.join(n,"node_modules/.vite/deps/@progress*.js")].map(e=>e.replace(/\\/g,"/")),i=function(e,t){const n=(e.licenses||[]).filter(e=>{const n=k(e);return"usage"!==n.type&&t.includes(n.code)});return{products:n.length>0?[]:e.products||[],licenses:n,userId:e.userId,integrity:e.integrity,scriptKey:!1,timestamp:e.iat}}(e,t),s=JSON.stringify(JSON.stringify(i)),d=`  ${s.substring(1,s.length-1)}  `;C(JSON.stringify(i)),a.globSync(o,{nodir:!0}).forEach(e=>{const t=r.readFileSync(e,{encoding:"utf-8"}).replace(/ {2}{.*} {2}/,d);r.writeFileSync(e,t,{encoding:"utf-8"})})}const pe=()=>E(process.env.TELERIK_TELEMETRY_INTERNAL);async function fe({url:e,payload:t,timeout:n}){const o=e.port?Number.parseInt(e.port,10):void 0,r={protocol:e.protocol,hostname:e.hostname,port:o,path:e.pathname,timeout:n,method:"POST",headers:{"Content-Type":"application/json"}};return new Promise((e,n)=>{const o=(e=>"https:"===e.protocol?d.request(e):u.request(e))(r);o.on("error",e=>{n(e)}),o.on("timeout",()=>{n(new Error("Request timeout"))}),o.on("close",()=>{e()}),o.end(JSON.stringify(t))})}async function ge(e){return fe({url:new URL(process.env[h]||m),payload:e,timeout:3e3})}async function Ie(e,t,n){const{id:o}=await x(),r=P(e.expiration).toISOString().split(".")[0]+"Z",i=function(e){if(void 0!==e)return null===e?null:{Type:e.type,CI:e.CI,UserId:e.userId,LicenseId:e.licenseId,WorkstationId:e.workstationId,ProductCode:e.productCode,ProductLicenseType:e.productLicenseType,ProductLicenseValidity:e.productLicenseValidity,ProductVersion:e.productVersion,UsageEvidence:e.usageEvidence,IsInternalUsage:e.isInternalUsage}}({type:"LicenseUsed",userId:e.userId,licenseId:e.licenseId,workstationId:o,productCode:e.code,productLicenseType:e.type,productLicenseValidity:r,productVersion:n,usageEvidence:t,isInternalUsage:!!pe()||void 0,CI:V()});C("LicenseUsed: "+JSON.stringify(i,null,2)),await ge(i).catch(e=>{C(`Failed to send telemetry: ${e}`)})}async function he({licenseKey:e,licenseEvidence:t,licenseErrorCode:n,usageEvidence:o,productVersion:r,productCode:i}){const{id:s}=await x(),c=t?P(t.expiration).toISOString().split(".")[0]+"Z":void 0,a=function(e){if(void 0!==e)return null===e?null:{Type:e.type,ProductCode:e.productCode,ProductVersion:e.productVersion,LicenseErrorCode:e.licenseErrorCode,ProductLicenseType:e.productLicenseType,ProductLicenseValidity:e.productLicenseValidity,LicenseId:e.licenseId,UserId:e.userId,WorkstationId:e.workstationId,CI:e.CI,IsInternalUsage:e.isInternalUsage,UsageEvidence:e.usageEvidence}}({type:"LicenseNotValid",productCode:i,productVersion:r,licenseErrorCode:n,productLicenseType:null==t?void 0:t.type,productLicenseValidity:c,licenseId:e.licenseId,userId:e.userId,workstationId:s,CI:V(),isInternalUsage:!!pe()||void 0,usageEvidence:o});C(`Workstation ID: ${s}`),C("LicenseNotValid: "+JSON.stringify(a,null,2)),await ge(a).catch(e=>{C(`Failed to send LicenseNotValid telemetry: ${e}`)})}const me=()=>(process.env[h]||m).replace("/usage","/collect");async function ve({productVersion:e,productCode:t}){const{id:n}=await x(),o=function(e){if(void 0!==e)return null===e?null:{Type:e.type,ProductCode:e.productCode,ProductVersion:e.productVersion,WorkstationId:e.workstationId,CI:e.CI,IsInternalUsage:e.isInternalUsage}}({type:"LicenseNotFound",productCode:t,productVersion:e,workstationId:n,CI:V(),isInternalUsage:!!pe()||void 0});C("LicenseNotFound: "+JSON.stringify(o,null,2)),await async function(e){return fe({url:new URL(me()),payload:e,timeout:3e3})}(o).catch(e=>{C(`Failed to send telemetry: ${e}`)})}async function ye(){const e=(process.argv[2]||"help").toLowerCase();if("help"===e)return console.info(`Progress Kendo UI Licensing utility for NPM packages\nCopyright Â© 2025 Progress Software Corporation\n\nUsage: kendo-ui-license <command> [arguments]\n\nSupported commands:\n    activate    kendo-ui-license activate\n\n                Validates and imports a Telerik and Kendo UI license key file.\n\n                The following locations are searched for a license key:\n                * The path specified in the ${p} environment variable.\n                * The ${l.join(", ")} environment variables.\n                * The ${f.join(", ")} files in:\n                    * The current working directory\n                    * Each parent directory\n                    * ~/${g} (Linux and macOS) or %APPDATA%\\${I} (Windows)\n\n                The exit status is one of the following values:\n                * 0 - success.\n                * 1 - no license key found.\n                * 2 - invalid license key.\n                * 3 - internal error.\n\n                Command arguments:\n\n                --ignore-no-license Sets the exit status to 0 (success) if a license file is missing.\n\n    help        kendo-ui-license help\n                kendo-ui-license\n\n                Prints this help message.\n`),0;if("activate"===e){const e="--ignore-no-license"===process.argv[3],t=F(),{id:n}=await x();C(`Workstation ID: ${n}`);let o=await async function(e){var t;const n=Q(e).keys(),o=[];for(const e of n){const n=Z(e),r=c.dirname(n),i=Y(n);let s=null===(t=i["@progress"])||void 0===t?void 0:t.package;if(ee(s))s.name=i.name,s.version=i.version,o.push(s);else{const e=[c.join(r,"esm2022","package-metadata.mjs"),c.join(r,"package-metadata.mjs")];let t;for(;!t&&e.length>0;)t=await import(e.shift()).catch(()=>{});if(t&&t.packageMetadata&&ee(t.packageMetadata)){s=t.packageMetadata;const e=s.version||i.version;o.push({...s,version:e})}}}return o}(t);0===o.length&&(o=function(e){const t=Q(e),n=[];for(const[e,o]of t){const t=X.find(t=>t.match(e));t&&n.push({name:e,productName:t.name,productCode:t.code,version:z(o),publishDate:-1,licensingDocsUrl:""})}return n}(t));let i=function(e){const t=new Set(e.flatMap(e=>[e.productCode,...e.productCodes||[],...e.redistributedBy||[]]).filter(Boolean));return Array.from(t.values())}(o);0===i.length&&(L("No Telerik or Kendo UI product references detected in project.\n  Consult the product documentation or contact support at https://prgress.co/3Pzpwvf"),i=v);const s=oe();if(!1===s.success){(e?T:w)(s.message,"TKL002");try{await async function(e){const t=te(e);for(const e of t)await ve({productVersion:e.version,productCode:e.productCode})}(o)}catch(e){C(`Failed to send telemetry: ${e.message}`)}return e?0:1}let a;try{a=await async function(e,t){var n;const o=await W(e,t);return(null===(n=o.licenses)||void 0===n?void 0:n.length)>0&&await Promise.all(o.licenses.map(e=>W(e,t))),o}(s.value,"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2mnUVMmkth2x+N/ODszG\nOFIYBL6NOO1XWRj1wkmecKuLziJDhFz0WQmyOjY34Ymg9pLuBA9QSWrrZuvPw40N\nm0X/GBmttFmPNvca3WmJ2oKM7PpLiUU9f7Ov5WeIXnx++ts/LC/OB7FtZ+LiRgJ7\n0mZnPeTogdFrASf0zSQJv4jmX840LPa6nomWeUgIVGPLLVI14Gib8Dl+nOckqCNc\nkAUUk4IBF67DufRt9zQyRxg99ysakvHX2SDbdGvIBdxWxvhhmrBoeix0uSVtG2gm\njdvSqlPJVdvMbk1Xe2+SUldJPrxH1VrTYeRUt4yqWxy16nFJUDj9exZ202X4THkU\nJQIDAQAB\n-----END PUBLIC KEY-----");const e=P(a.iat).toLocaleString();T(`Telerik and Kendo UI License Key found at: ${s.source}\n  License issued at ${e} to ${a.aud}`)}catch(e){return w(`Corrupted Telerik and Kendo UI License Key content in ${s.source}\n  Download a new copy of the license key from https://prgress.co/3PxpDaP`),2}if(o.length>0){const e=ue(a,o);for(const t of e.productErrors.values())L(t.message,t.code);try{await async function(e,t){if(e.usageEvidence){for(const t of e.productLicenses.values()){for(const n of e.productVersions)$(n)===t.code&&await Ie(t,e.usageEvidence,n.version);re(e.productNames.get(t.code),t)}for(const n of e.productErrors.values())for(const o of e.productVersions)o.productName===n.productName&&await he({licenseKey:t,licenseEvidence:n.licenseEvidence,licenseErrorCode:n.code,usageEvidence:e.usageEvidence,productVersion:o.version,productCode:o.productCode})}}(e,a)}catch(e){C(`Failed to send telemetry: ${e.message}`)}}try{le(a,i),function(){const e=F(),t=c.resolve(e,".next/cache");r.existsSync(t)&&L(`Next.js cache detected in ${t}\n  Delete the cache directory to apply the license key in production builds.`)}()}catch(e){return console.error(e),w("Error while importing license."),3}return 0}}(async()=>{const e=await ye();process.exit(e)})();
